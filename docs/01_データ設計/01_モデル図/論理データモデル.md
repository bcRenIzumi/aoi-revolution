# 論理データモデル

## エンティティ定義

### マスタエンティティ

#### M_COMPANY（企業）
企業の基本情報を管理するマスタエンティティです。

| 論理名     | 物理名     | データ型      |  PK   |  FK   | NULL許容 | 説明                       |
| ---------- | ---------- | ------------- | :---: | :---: | :------: | -------------------------- |
| ID         | id         | nvarchar(10)  |   ○   |   -   |    ×     | 企業を一意に識別する業務ID |
| 企業名     | name       | nvarchar(100) |   -   |   -   |    ×     | 企業の正式名称             |
| 有効フラグ | is_active  | bit           |   -   |   -   |    ×     | 1: 有効、0: 無効           |
| 作成日時   | created_at | datetime2     |   -   |   -   |    ×     | 作成日時                   |
| 更新日時   | updated_at | datetime2     |   -   |   -   |    ×     | 更新日時                   |

#### M_DEPARTMENT（部門）
企業内の部門情報を管理するエンティティです。

| 論理名     | 物理名     | データ型  |  PK   |  FK   | NULL許容 | 説明                       |
| ---------- | ---------- | --------- | :---: | :---: | :------: | -------------------------- |
| ID         | id         | nvarchar  |   ○   |   -   |    ×     | 部門を一意に識別する業務ID |
| 企業ID     | company_id | nvarchar  |   -   |   ○   |    ×     | 企業ID (M_COMPANY.id)      |
| 部門名     | name       | nvarchar  |   -   |   -   |    ×     | 部門の正式名称             |
| 有効フラグ | is_active  | bit       |   -   |   -   |    ×     | true: 有効、false: 無効    |
| 作成日時   | created_at | datetime2 |   -   |   -   |    ×     | 作成日時                   |
| 更新日時   | updated_at | datetime2 |   -   |   -   |    ×     | 更新日時                   |

#### M_LOCATION（拠点）
企業の拠点情報を管理するエンティティです。

| 論理名     | 物理名      | データ型  |  PK   |  FK   | NULL許容 | 説明                       |
| ---------- | ----------- | --------- | :---: | :---: | :------: | -------------------------- |
| ID         | id          | nvarchar  |   ○   |   -   |    ×     | 拠点を一意に識別する業務ID |
| 企業ID     | company_id  | nvarchar  |   -   |   ○   |    ×     | 企業ID (M_COMPANY.id)      |
| 拠点名     | name        | nvarchar  |   -   |   -   |    ×     | 拠点の正式名称             |
| 住所       | address     | nvarchar  |   -   |   -   |    ×     | 拠点の所在地住所           |
| 郵便番号   | postal_code | nvarchar  |   -   |   -   |    ×     | 拠点の郵便番号             |
| 電話番号   | phone       | nvarchar  |   -   |   -   |    ×     | 拠点の代表電話番号         |
| 有効フラグ | is_active   | bit       |   -   |   -   |    ×     | true: 有効、false: 無効    |
| 作成日時   | created_at  | datetime2 |   -   |   -   |    ×     | 作成日時                   |
| 更新日時   | updated_at  | datetime2 |   -   |   -   |    ×     | 更新日時                   |

### M_DELIVERY_DATE（希望納品日マスタ）
PC申請における標準的な納品日の選択肢を管理するエンティティです。

| 論理名     | 物理名     | データ型  |  PK   |  FK   | NULL許容 | 説明                             |
| ---------- | ---------- | --------- | :---: | :---: | :------: | -------------------------------- |
| ID         | id         | nvarchar  |   ○   |   -   |    ×     | 希望納品日を一意に識別する業務ID |
| 表示名     | name       | nvarchar  |   -   |   -   |    ×     | 希望納品日の表示名               |
| 有効フラグ | is_active  | bit       |   -   |   -   |    ×     | true: 有効、false: 無効          |
| 作成日時   | created_at | datetime2 |   -   |   -   |    ×     | 作成日時                         |
| 更新日時   | updated_at | datetime2 |   -   |   -   |    ×     | 更新日時                         |

### M_NETWORK_ENV（ネットワーク利用環境マスタ）
利用可能なネットワーク環境の種類や設定を管理するエンティティです。

| 論理名     | 物理名     | データ型  |  PK   |  FK   | NULL許容 | 説明                                   |
| ---------- | ---------- | --------- | :---: | :---: | :------: | -------------------------------------- |
| ID         | id         | nvarchar  |   ○   |   -   |    ×     | ネットワーク環境を一意に識別する業務ID |
| 環境名     | name       | nvarchar  |   -   |   -   |    ×     | ネットワーク環境の名称                 |
| 有効フラグ | is_active  | bit       |   -   |   -   |    ×     | true: 有効、false: 無効                |
| 作成日時   | created_at | datetime2 |   -   |   -   |    ×     | 作成日時                               |
| 更新日時   | updated_at | datetime2 |   -   |   -   |    ×     | 更新日時                               |

### M_INSTALLATION_TYPE（導入区分マスタ）
PCの導入形態や目的を分類するエンティティです。

| 論理名     | 物理名     | データ型  |  PK   |  FK   | NULL許容 | 説明                           |
| ---------- | ---------- | --------- | :---: | :---: | :------: | ------------------------------ |
| ID         | id         | nvarchar  |   ○   |   -   |    ×     | 導入区分を一意に識別する業務ID |
| 区分名     | name       | nvarchar  |   -   |   -   |    ×     | 導入区分の名称                 |
| 説明       | detail     | nvarchar  |   -   |   -   |    ○     | 導入区分の補足説明             |
| 有効フラグ | is_active  | bit       |   -   |   -   |    ×     | true: 有効、false: 無効        |
| 作成日時   | created_at | datetime2 |   -   |   -   |    ×     | 作成日時                       |
| 更新日時   | updated_at | datetime2 |   -   |   -   |    ×     | 更新日時                       |

### M_PC_MODEL（選択機種マスタ）
申請可能なPCモデルの一覧を管理するエンティティです。

| 論理名     | 物理名     | データ型  |  PK   |  FK   | NULL許容 | 説明                           |
| ---------- | ---------- | --------- | :---: | :---: | :------: | ------------------------------ |
| ID         | id         | nvarchar  |   ○   |   -   |    ×     | PCモデルを一意に識別する業務ID |
| モデル名   | name       | nvarchar  |   -   |   -   |    ×     | PCのモデル名                   |
| 有効フラグ | is_active  | bit       |   -   |   -   |    ×     | true: 有効、false: 無効        |
| 作成日時   | created_at | datetime2 |   -   |   -   |    ×     | 作成日時                       |
| 更新日時   | updated_at | datetime2 |   -   |   -   |    ×     | 更新日時                       |

#### M_EMPLOYEE（社員）
社員の基本情報を管理するエンティティです。

| 論理名         | 物理名     | データ型  |  PK   |  FK   | NULL許容 | 説明                       |
| -------------- | ---------- | --------- | :---: | :---: | :------: | -------------------------- |
| ID             | id         | nvarchar  |   ○   |   -   |    ×     | 社員を一意に識別する業務ID |
| 企業ID         | company_id | nvarchar  |   -   |   ○   |    ×     | 企業ID (M_COMPANY.id)      |
| 部門ID         | dept_id    | nvarchar  |   -   |   ○   |    ×     | 部門ID (M_DEPARTMENT.id)   |
| 社員名         | name       | nvarchar  |   -   |   -   |    ×     | 社員の氏名                 |
| メールアドレス | email      | nvarchar  |   -   |   -   |    ×     | 社員の業務用メールアドレス |
| 有効フラグ     | is_active  | bit       |   -   |   -   |    ×     | true: 有効、false: 無効    |
| 作成日時       | created_at | datetime2 |   -   |   -   |    ×     | 作成日時                   |
| 更新日時       | updated_at | datetime2 |   -   |   -   |    ×     | 更新日時                   |

#### M_APP_TYPE（申請種別マスタ）
申請種別を管理するエンティティです。

| 論理名     | 物理名     | データ型  |  PK   |  FK   | NULL許容 | 説明                       |
| ---------- | ---------- | --------- | :---: | :---: | :------: | -------------------------- |
| ID         | id         | nvarchar  |   ○   |   -   |    ×     | 申請を一意に識別する業務ID |
| 申請名     | name       | nvarchar  |   -   |   -   |    ×     | 申請の種別名               |
| 有効フラグ | is_active  | bit       |   -   |   -   |    ×     | true: 有効、false: 無効    |
| 作成日時   | created_at | datetime2 |   -   |   -   |    ×     | 作成日時                   |
| 更新日時   | updated_at | datetime2 |   -   |   -   |    ×     | 更新日時                   |

### トランザクションエンティティ

#### T_APP_INFO（申請情報）
申請情報を管理するエンティティです。

| 論理名     | 物理名     | データ型  |  PK   |  FK   | NULL許容 | 説明                       |
| ---------- | ---------- | --------- | :---: | :---: | :------: | -------------------------- |
| ID         | id         | nvarchar  |   ○   |   -   |    ×     | 申請を一意に識別する業務ID |
| 社員ID     | emp_id     | nvarchar  |   -   |   ○   |    ×     | 社員ID (M_EMPLOYEE.id)     |
| 申請種別ID | type_id    | nvarchar  |   -   |   ○   |    ×     | 申請種別ID (M_APP_TYPE.id) |
| 有効フラグ | is_active  | bit       |   -   |   -   |    ×     | true: 有効、false: 無効    |
| 作成日時   | created_at | datetime2 |   -   |   -   |    ×     | 作成日時                   |
| 更新日時   | updated_at | datetime2 |   -   |   -   |    ×     | 更新日時                   |

#### T_BASIC_INFO（基本情報）
社員の個人情報を管理するエンティティです。

| 論理名               | 物理名           | データ型  |  PK   |  FK   | NULL許容 | 説明                         |
| -------------------- | ---------------- | --------- | :---: | :---: | :------: | ---------------------------- |
| 申請ID               | app_id           | nvarchar  |   ○   |   ○   |    ×     | 申請ID (T_APP_INFO.id)       |
| 件名                 | title            | nvarchar  |   -   |   -   |    ×     | 申請の件名                   |
| 申請日               | app_date         | date      |   -   |   -   |    ×     | 申請が行われた日付           |
| 申請者所属会社       | company_name     | nvarchar  |   -   |   -   |    ×     | 申請者の所属会社名           |
| 申請者所属部門       | dept_name        | nvarchar  |   -   |   -   |    ×     | 申請者の所属部門名           |
| 申請者所属課         | section_name     | nvarchar  |   -   |   -   |    ×     | 申請者の所属課名             |
| 申請者メールアドレス | email            | nvarchar  |   -   |   -   |    ×     | 申請者の個人用メールアドレス |
| 申請者社員番号       | emp_number       | nvarchar  |   -   |   -   |    ×     | 申請者の社員番号             |
| 申請者内線番号       | extension_number | nvarchar  |   -   |   -   |    ×     | 申請者の内線番号             |
| 承認者1              | approver_1       | nvarchar  |   -   |   -   |    ×     | 承認者1の社員ID              |
| 承認者2              | approver_2       | nvarchar  |   -   |   -   |    ×     | 承認者2の社員ID              |
| 公開フラグ           | is_public        | bit       |   -   |   -   |    ×     | true: 公開、false: 非公開    |
| 有効フラグ           | is_active        | bit       |   -   |   -   |    ×     | true: 有効、false: 無効      |
| 作成日時             | created_at       | datetime2 |   -   |   -   |    ×     | 作成日時                     |
| 更新日時             | updated_at       | datetime2 |   -   |   -   |    ×     | 更新日時                     |

#### T_FILE_INFO（ファイル情報）
システム内のファイル情報を管理するエンティティです。

| 論理名       | 物理名     | データ型  |  PK   |  FK   | NULL許容 | 説明                    |
| ------------ | ---------- | --------- | :---: | :---: | :------: | ----------------------- |
| 申請ID       | app_id     | nvarchar  |   ○   |   ○   |    ×     | 申請ID (T_APP_INFO.id)  |
| ファイルパス | file_path  | nvarchar  |   -   |   -   |    ×     | ファイルの保存パス      |
| 有効フラグ   | is_active  | bit       |   -   |   -   |    ×     | true: 有効、false: 無効 |
| 作成日時     | created_at | datetime2 |   -   |   -   |    ×     | 作成日時                |
| 更新日時     | updated_at | datetime2 |   -   |   -   |    ×     | 更新日時                |

#### T_PC_REQUEST（PC申請）
PC関連の申請情報を管理するエンティティです。

| 論理名             | 物理名        | データ型       |  PK   |  FK   | NULL許容 | 説明                                  |
| ------------------ | ------------- | -------------- | :---: | :---: | :------: | ------------------------------------- |
| ID                 | id            | nvarchar(20)   |   ○   |   -   |    ×     | 申請を一意に識別するID                |
| 管理会社ID         | company_id    | nvarchar(10)   |   -   |   ○   |    ×     | 管理会社ID (M_COMPANY.id)             |
| 希望納品日ID       | dlv_date_id   | nvarchar(10)   |   -   |   ○   |    ×     | 希望納品日ID (M_DELIVERY_DATE.id)     |
| 管理者部門名       | manager_dept  | nvarchar(100)  |   -   |   -   |    ×     | 管理者の部門名                        |
| 管理者ID           | manager_id    | nvarchar(10)   |   -   |   ○   |    ×     | 管理者ID (M_EMPLOYEE.id)              |
| 管理者氏名         | manager_name  | nvarchar(50)   |   -   |   -   |    ×     | 管理者の氏名                          |
| 費用負担先コード   | cost_code     | nvarchar(20)   |   -   |   -   |    ○     | 指定費用負担先コード                  |
| 使用者部門名       | user_dept     | nvarchar(100)  |   -   |   -   |    ○     | 使用者の部門名                        |
| 使用者ID           | user_id       | nvarchar(10)   |   -   |   ○   |    ○     | 使用者ID (M_EMPLOYEE.id)              |
| 使用者氏名         | user_name     | nvarchar(50)   |   -   |   -   |    ○     | 使用者の氏名                          |
| 設置拠点ID         | location_id   | nvarchar(10)   |   -   |   ○   |    ×     | 設置拠点ID (M_LOCATION.id)            |
| 設置フロア         | floor         | nvarchar(50)   |   -   |   -   |    ○     | 設置フロア                            |
| 設置拠点その他     | other_loc     | nvarchar(200)  |   -   |   -   |    ○     | その他の設置拠点詳細                  |
| 設置場所詳細       | loc_detail    | nvarchar(200)  |   -   |   -   |    ○     | 設置場所の詳細情報                    |
| ネットワーク環境ID | network_id    | nvarchar(10)   |   -   |   ○   |    ×     | ネットワーク環境ID (M_NETWORK_ENV.id) |
| 指定IPアドレス     | ip_address    | nvarchar(15)   |   -   |   -   |    ○     | 指定IPアドレス                        |
| 納品先社名ID       | dlv_comp_id   | nvarchar(10)   |   -   |   ○   |    ×     | 納品先の社名ID (M_COMPANY.id)         |
| 納品先拠点ID       | dlv_loc_id    | nvarchar(10)   |   -   |   ○   |    ×     | 納品先の拠点ID (M_LOCATION.id)        |
| 納品先郵便番号     | dlv_postal    | nvarchar(8)    |   -   |   -   |    ○     | 納品先の郵便番号                      |
| 納品先住所         | dlv_address   | nvarchar(200)  |   -   |   -   |    ○     | 納品先の住所                          |
| 納品先フロア       | dlv_floor     | nvarchar(50)   |   -   |   -   |    ○     | 納品先のフロア                        |
| 納品先部門名       | dlv_dept      | nvarchar(100)  |   -   |   -   |    ○     | 納品先の部門名                        |
| 受取担当者名       | receiver      | nvarchar(50)   |   -   |   -   |    ×     | 受取担当者の氏名                      |
| 受取担当者電話番号 | receiver_tel  | nvarchar(20)   |   -   |   -   |    ×     | 受取担当者の電話番号                  |
| 導入区分ID         | type_id       | nvarchar(10)   |   -   |   ○   |    ○     | 導入区分ID (M_INSTALLATION_TYPE.id)   |
| PCモデルID         | model_id      | nvarchar(10)   |   -   |   ○   |    ×     | PCモデルID (M_PC_MODEL.id)            |
| 申請台数           | quantity      | int            |   -   |   -   |    ×     | 申請PC台数                            |
| 申請理由           | reason        | nvarchar(1000) |   -   |   -   |    ×     | 申請理由                              |
| 現行PC管理番号     | current_pc_no | nvarchar(20)   |   -   |   -   |    ○     | 現行PCの管理番号                      |
| 現行PC契約終了日   | current_end   | date           |   -   |   -   |    ○     | 現行PCの契約終了日（日付のみ）        |
| 申請状態           | status        | nvarchar(20)   |   -   |   -   |    ×     | 申請の現在の状態                      |
| 申請日             | request_date  | date           |   -   |   -   |    ×     | 申請が行われた日付（日付のみ）        |
| 承認日             | approve_date  | date           |   -   |   -   |    ○     | 申請が承認された日付（日付のみ）      |
| 承認者ID           | approver_id   | nvarchar(10)   |   -   |   ○   |    ○     | 承認者ID (M_EMPLOYEE.id)              |
| 有効フラグ         | is_active     | bit            |   -   |   -   |    ×     | 1: 有効、0: 無効                      |
| 作成日時           | created_at    | datetime2      |   -   |   -   |    ×     | 作成日時                              |
| 更新日時           | updated_at    | datetime2      |   -   |   -   |    ×     | 更新日時                              |

